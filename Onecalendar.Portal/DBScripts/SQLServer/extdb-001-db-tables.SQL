IF EXISTS (SELECT * FROM dbo.sysobjects WHERE id = object_id('T_BIZ001_COURSE') AND  OBJECTPROPERTY(id, 'IsUserTable') = 1)
DROP TABLE T_BIZ001_COURSE;

IF EXISTS (SELECT * FROM dbo.sysobjects WHERE id = object_id('T_CMN001_USER') AND  OBJECTPROPERTY(id, 'IsUserTable') = 1)
DROP TABLE T_CMN001_USER;


CREATE TABLE T_BIZ001_COURSE ( 
	COURSEID 							NVARCHAR(36) NOT NULL,
	USERID 								NVARCHAR(36) NOT NULL,
	COURSE_NAME 						NVARCHAR(66) NOT NULL,
	COURSE_DETAIL 						NVARCHAR(2000),
	CREATED_BY                        	NVARCHAR(256) NOT NULL,
	CREATED_TIME                      	DATETIME NOT NULL,
	LAST_UPDATED_BY                   	NVARCHAR(256) NOT NULL,
	LAST_UPDATED_TIME                 	DATETIME NOT NULL,
	VERSION_NO                        	INT NOT NULL,
	TRANSACTION_ID                    	VARCHAR(50) NOT NULL
);

CREATE TABLE T_CMN001_USER ( 
	USERID 							    NVARCHAR(36) NOT NULL,
	LOGINID 							NVARCHAR(50) NOT NULL,
	USER_NAME 							NVARCHAR(66) NOT NULL,
	EMAIL_ADDRESS 					 	NVARCHAR(255) NOT NULL,
	PASSWORD_HASH 						VARBINARY,
	PASSWORD_HIST_HASH 					VARBINARY,
	LAST_ACTIVITY_DATE 					DATETIME,
	IS_DELETED 							CHAR(1),
	COMPANY_ID 							NVARCHAR(50),
	STATUS 								CHAR(1),
	CREATED_BY                          NVARCHAR(256) NOT NULL,
	CREATED_TIME                        DATETIME NOT NULL,
	LAST_UPDATED_BY                     NVARCHAR(256) NOT NULL,
	LAST_UPDATED_TIME                   DATETIME NOT NULL,
	VERSION_NO                          INT NOT NULL,
	TRANSACTION_ID                      VARCHAR(50) NOT NULL
);


ALTER TABLE T_BIZ001_COURSE ADD CONSTRAINT PK_BIZ001_COURSE 
	PRIMARY KEY CLUSTERED (COURSEID);

ALTER TABLE T_CMN001_USER ADD CONSTRAINT PK_CMN001_USER 
	PRIMARY KEY CLUSTERED (USERID);

ALTER TABLE T_CMN001_USER
	ADD CONSTRAINT UQ_CMN001_USER_LOGINID UNIQUE (LOGINID);
